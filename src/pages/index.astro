---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);

function formatDate(date: Date) {
  return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short' });
}
---

<Base title="Jade Duong">

  <!-- HERO -->
  <section class="hero" id="home">
    <span class="hero-label">Curiosity in progress</span>
    <h1>Getting out of<br>my <em>own box.</em></h1>
    <p class="hero-description">
      I'm Jade. This is a small corner of the internet where I
      share things I'm learning, things I'm making with vibe
      coding, and thoughts I'm working through.
    </p>
    <div class="hero-scroll">
      <span class="line"></span>
      <span>Scroll to explore</span>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects">
    <div class="section-header reveal">
      <h2>Projects</h2>
      <span class="note">things I vibe coded</span>
    </div>
    <div class="projects-grid">
      <p style="color: var(--stone); font-style: italic; font-family: var(--serif);">Coming soon — stay tuned.</p>
    </div>
  </section>

  <!-- BLOG -->
  <section id="blog">
    <div class="section-header reveal">
      <h2>Writing</h2>
      <span class="note">thinking out loud</span>
    </div>

    <div class="blog-filters reveal" id="blog-filters">
      <button class="filter-btn active" data-tag="all">All</button>
      {[...new Set(posts.map(p => p.data.tag))].sort().map((tag) => (
        <button class="filter-btn" data-tag={tag}>{tag}</button>
      ))}
    </div>

    <div class="blog-list" id="blog-list">
      {posts.map((post) => (
        <a href={`/blog/${post.slug}`} class="blog-item reveal" data-tag={post.data.tag}>
          <span class="blog-date">{formatDate(post.data.date)}</span>
          <span class="blog-title">{post.data.title}</span>
          <span class="blog-tag">{post.data.tag}</span>
        </a>
      ))}
    </div>

    <p class="blog-empty" id="blog-empty" style="display:none;">
      No posts in this category yet — stay tuned.
    </p>
  </section>

  <!-- ABOUT -->
  <section id="about">
    <div class="section-header reveal">
      <h2>About</h2>
    </div>
    <div class="about-content reveal">
      <p>
        I'm Jade — a curious person learning to do things
        she's never done before.
      </p>
      <p>
        This site is about the hours where I teach myself to code
        by vibing with AI, write about whatever's on my mind, and
        try things I'm not qualified for yet. I believe you don't
        need permission to learn something new.
      </p>
      <p>
        Everything here is a work in progress. That's kind of
        the whole point.
      </p>
      <div class="about-contact">
        <a href="mailto:jadeduong1707@gmail.com">Email</a>
        <a href="https://linkedin.com/in/jade-duong/" target="_blank" rel="noopener">LinkedIn</a>
      </div>
    </div>
  </section>

</Base>